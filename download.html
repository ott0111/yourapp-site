<!DOCTYPE html>
<html>
<head>
  <title>Download - YZY Performance Toolkit</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <style>
    body{
      margin:0;
      font-family:'Segoe UI',sans-serif;
      background:linear-gradient(135deg,#0f0f1a,#16162a);
      color:white;
      padding:40px;
      text-align:center;
    }

    h1{font-size:36px;margin-bottom:10px;}
    p{opacity:0.8;margin-bottom:30px;}

    .card{
      background:#1e1e30;
      padding:40px;
      border-radius:20px;
      max-width:600px;
      margin:0 auto;
      border:1px solid rgba(255,255,255,0.1);
      box-shadow:0 0 40px rgba(138,43,226,0.25);
      animation:fadeIn 0.6s ease;
    }

    .key-box{
      margin-top:20px;
      padding:15px;
      background:#111;
      border-radius:12px;
      font-family:monospace;
      font-size:18px;
      letter-spacing:2px;
      border:1px solid rgba(255,255,255,0.1);
      word-break:break-all;
    }

    input{
      width:100%;
      padding:12px;
      border-radius:10px;
      border:none;
      margin-top:15px;
      font-size:16px;
    }

    button{
      margin-top:20px;
      padding:16px 28px;
      border-radius:14px;
      border:none;
      background:linear-gradient(90deg,#8A2BE2,#00FFFF);
      font-weight:bold;
      cursor:pointer;
      color:black;
      font-size:16px;
      width:100%;
      transition:0.3s ease;
    }

    button:hover{
      transform:scale(1.03);
    }

    @keyframes fadeIn{
      from{opacity:0;transform:translateY(20px);}
      to{opacity:1;transform:translateY(0);}
    }
  </style>
</head>

<body>

<h1>YZY Performance Toolkit</h1>
<p>Enter your PayPal email to receive your activation key</p>

<div class="card">

  <input type="email" id="emailInput" placeholder="Enter PayPal Email" />

  <button onclick="getLicense()">Generate Key</button>

  <div id="keyDisplay" class="key-box" style="display:none;"></div>

  <button id="downloadBtn" style="display:none;" onclick="downloadApp()">Download Toolkit</button>

</div>

<script>
  // ðŸ”¥ PASTE YOUR DEPLOYED GOOGLE WEB APP URL HERE
  const licenseServer = "https://script.google.com/macros/s/AKfycbzBUB4bQGh0mOmaNpcMYT5ZyyPTJs3VdYBFXj1vmiQM5iWvsp5xi2khgZOE2BzlW965CQ/exec";

  async function getLicense() {

    const email = document.getElementById("emailInput").value;

    if(!email){
      alert("Enter your PayPal email.");
      return;
    }

    try {

      const response = await fetch(licenseServer, {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify({
          mode: "getKey",
          email: email
        })
      });

      const data = await response.json();

      if(data.status === "READY"){

        document.getElementById("keyDisplay").style.display = "block";
        document.getElementById("keyDisplay").innerText = data.key;

        document.getElementById("downloadBtn").style.display = "block";

      } else {
        alert("No paid order found for this email.");
      }

    } catch(err){
      alert("Server error. Try again.");
    }
  }

  function downloadApp(){
    window.location.href = "/app.exe";
  }

</script>

<script>
  window.si = window.si || function () { (window.siq = window.siq || []).push(arguments); };
</script>
<script defer src="/_vercel/speed-insights/script.js"></script>

</body>
</html>
